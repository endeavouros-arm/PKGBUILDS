# Maintainer : Sravan Pannala <sradjoker@endeavouros.com>
# Contributor : Dan Johansen <strit@manjaro.org>
# Contributor: Dragan Simic <dsimic@buserror.io>

pkgname=pinebookpro-post-install
pkgver=20$(date +%y%m%d)
pkgrel=3
pkgdesc="ARM platform files for Pine64 Pinebook Pro"
arch=('any')
url="https://www.manjaro.org"
conflicts=('pinebook-post-install')
license=('GPL')
depends=('systemd' 'alsa-ucm-conf' 'initramfs' 'sed' 'grep')
install=${pkgname}.install
source=('40-hibernation-disable.conf'
        '50-suspend-state.conf'
        '99-pinebookpro.conf')
sha256sums=('d355735c093e031ca2b9684a62353a214b2a21efe22c89c746acb1c4ff507251'
            '816c3b9169aadc8b4a4e42d22d8480ecd22408f1ec3d224d1980382c343b619e'
            'f564a08c2e44e0092e557713c5b420015aad7e11a78a6277801a38b327a02e65')

package() {
    install -D -m 0644 "${srcdir}/40-hibernation-disable.conf" -t "${pkgdir}/usr/lib/systemd/sleep.conf.d"
    install -D -m 0644 "${srcdir}/50-suspend-state.conf" -t "${pkgdir}/usr/lib/systemd/sleep.conf.d"
    install -D -m 0644 "${srcdir}/99-pinebookpro.conf" -t "${pkgdir}/usr/lib/sysctl.d"

    ln -s /usr/lib/firmware "${pkgdir}/etc/firmware"
}
